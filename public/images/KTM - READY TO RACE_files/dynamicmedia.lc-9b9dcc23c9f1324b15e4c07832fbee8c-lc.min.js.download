(function(){function p(){$(".s7dm-dynamic-media-ktm").each(function(){var a=$(this),e=a.attr("id"),b=S7dmUtils[e],d=a.data("asset-type"),c=a.data("mode"),g=a.data("stagesize");"undefined"!=typeof b&&null!=b&&(b.dispose(),S7dmUtils[e]=null,a.removeClass("s7responsiveViewer"));a.html("");if(b=a.data("viewer-type")){d=a.data("asset-path");c=a.data("asset-type");var h=a.data("viewer-type"),k=a.data("imageserver"),l=a.data("videoserver"),p=a.data("contenturl"),f=a.data("config"),n=a.data("wcmdisabled"),
m=a.data("stagesize"),r=a.data("viewermodifiers"),q=a.data("dms7");k={asset:d,serverurl:k,contenturl:p};r&&$.extend(k,t(r));(n=!n&&""!=n)&&(k.asset+="?cache\x3doff");m&&(k.stagesize=m);"FlyoutViewer"===h&&(k.imagereload="1,breakpoint,100;320;480");0!==d.indexOf("/")&&(k.aemmode="0");if(0<=h.indexOf("Video")||0<=h.indexOf("Mixed"))if(k.videoserverurl=l,"video"===c||"undefined"!=typeof q&&n)k.playback="native",k.progressivebitrate="20000";"undefined"!=typeof f&&0<f.length&&(d=f.split("|")[0],k.config=
d);d={containerId:a.attr("id"),params:k};"FlyoutViewer"==b&&g||a.addClass("s7responsiveViewer");b=new s7viewers[b](d);"undefined"!=typeof Granite&&"undefined"!=typeof Granite.I18n&&b.setLocalizedTexts(u());S7dmUtils[e]=b;b.init()}else"image"===d&&(void 0===c&&(c="showOriginalImage"),a.data("breakpoints")||"smartcrop"===c||"showOriginalImage"===c?(a[0].removeAttribute("data-stagesize"),l=a.data("imagepreset"),m=a.data("imageserver"),c=a.data("linkurl"),h=a.data("linktarget"),b=a.data("title"),d=a.data("alt"),
f=a.data("urlmodifiers"),e=$("\x3cdiv\x3e",{"class":"s7responsiveContainer"}),g=a.attr("id")+"_resp",m={id:g,src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","data-src":m+a.data("asset-path"),"class":"fluidimage","data-mode":a.data("mode"),"data-breakpoints":a.data("breakpoints"),"data-enablehd":"never"===a.data("enablehd")?"never":"always","data-aspectratio":a.data("aspectratio")},l&&(m["data-src"]+="?$"+l+"$"),f&&(m["data-src"]+=(l?"\x26":"?")+f),l=$("\x3cimg\x3e",
m),c?(c={href:c,target:h},d&&(c.alt=d,c.title=d,l.attr("alt",d)),b&&(c.title=b),b=$("\x3ca\x3e",c),b.append(l),e.append(b)):(d&&l.attr("alt",d),e.append(l)),a.append(e),s7responsiveImage(document.getElementById(g))):(a[0].removeAttribute("data-enablehd"),c=a.data("stagesize"),b=a.data("linkurl"),d=a.data("linktarget"),e=a.data("title"),g=a.data("alt"),h=a.data("imagepreset"),f=a.data("imageserver"),l=a.data("urlmodifiers"),f={src:f+a.data("asset-path")},h&&(f.src+="?$"+h+"$"),l&&(f.src+=(h?"\x26":
"?")+l),c&&(c=c.split(","),f.width=c[0],1<c.length&&(f.height=c[1])),c=$("\x3cimg\x3e",f),b?(b={href:b,target:d},g&&(b.alt=g,b.title=g,c.attr("alt",g)),e&&(b.title=e),e=$("\x3ca\x3e",b),e.append(c),a.append(e)):(g&&c.attr("alt",g),a.append(c))))})}function q(){console.log("S7Viewer is missing")}function t(a){var e={};if(a){a=a.split("\x26");for(var b=0;b<a.length;b++)if(0<a[b].indexOf("\x3d")){var d=a[b].substring(0,a[b].indexOf("\x3d")),c=a[b].substring(a[b].indexOf("\x3d")+1);e[d]=c}}return e}function u(){var a=
{},e=Granite.I18n.getLocale(),b=s7sdk_i18n.localizedText,d={},c;for(c in b){var g=b[c],h;for(h in g)d[c+"."+h]=g[h]}a[e]=d;a.defaultLocale=Granite.I18n.getLocale();return a}var v={BasicZoomViewer:"html5/js/BasicZoomViewer.js",FlyoutViewer:"html5/js/FlyoutViewer.js",MixedMediaViewer:"html5/js/MixedMediaViewer.js",SpinViewer:"html5/js/SpinViewer.js",VideoViewer:"html5/js/VideoViewer.js",ZoomViewer:"html5/js/ZoomViewer.js",ZoomVerticalViewer:"html5/js/ZoomVerticalViewer.js",Responsive:"libs/responsive_image.js"};
$(document).ready(function(){if(0<$(".s7dm-dynamic-media-ktm").length){var a=new S7dmUtils.Viewer,e=$(".s7dm-dynamic-media-ktm").data("viewer-path"),b=$(".s7dm-dynamic-media-ktm").data("page-locale"),d="/libs/dam/components/scene7/common/clientlibs/i18n.js";"undefined"!=typeof Granite&&"undefined"!=typeof Granite.I18n&&(Granite.I18n.setLocale(b),d=Granite.HTTP.externalize(d));$("head").append('\x3cscript type\x3d"text/javascript" src\x3d"'+d+'"\x3e\x3c/script\x3e');a.load(v,e).ready({success:p,fail:q})}})}).call(this);